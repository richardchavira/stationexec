var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.owns=function(d,a){return Object.prototype.hasOwnProperty.call(d,a)};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,a,c){d!=Array.prototype&&d!=Object.prototype&&(d[a]=c.value)};
$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(d,a,c,b){if(a){c=$jscomp.global;d=d.split(".");for(b=0;b<d.length-1;b++){var e=d[b];e in c||(c[e]={});c=c[e]}d=d[d.length-1];b=c[d];a=a(b);a!=b&&null!=a&&$jscomp.defineProperty(c,d,{configurable:!0,writable:!0,value:a})}};
$jscomp.polyfill("Object.entries",function(d){return d?d:function(a){var c=[],b;for(b in a)$jscomp.owns(a,b)&&c.push([b,a[b]]);return c}},"es8","es3");$jscomp.checkStringArgs=function(d,a,c){if(null==d)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return d+""};
$jscomp.polyfill("String.prototype.startsWith",function(d){return d?d:function(a,c){var b=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var e=b.length,d=a.length;c=Math.max(0,Math.min(c|0,b.length));for(var f=0;f<d&&c<e;)if(b[c++]!=a[f++])return!1;return f>=d}},"es6","es3");$jscomp.polyfill("Object.is",function(d){return d?d:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(d){return d?d:function(a,c){var b=this;b instanceof String&&(b=String(b));var e=b.length;c=c||0;for(0>c&&(c=Math.max(c+e,0));c<e;c++){var d=b[c];if(d===a||Object.is(d,a))return!0}return!1}},"es7","es3");$jscomp.polyfill("String.prototype.includes",function(d){return d?d:function(a,c){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,c||0)}},"es6","es3");
$jscomp.arrayIteratorImpl=function(d){var a=0;return function(){return a<d.length?{done:!1,value:d[a++]}:{done:!0}}};$jscomp.arrayIterator=function(d){return{next:$jscomp.arrayIteratorImpl(d)}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(d,a){this.$jscomp$symbol$id_=d;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:a})};
$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function d(c){if(this instanceof d)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(c||"")+"_"+a++,c)}var a=0;return d}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var d=$jscomp.global.Symbol.iterator;d||(d=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[d]&&$jscomp.defineProperty(Array.prototype,d,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var d=$jscomp.global.Symbol.asyncIterator;d||(d=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(d){$jscomp.initSymbolIterator();d={next:d};d[$jscomp.global.Symbol.iterator]=function(){return this};return d};
$jscomp.iteratorFromArray=function(d,a){$jscomp.initSymbolIterator();d instanceof String&&(d+="");var c=0,b={next:function(){if(c<d.length){var e=c++;return{value:a(e,d[e]),done:!1}}b.next=function(){return{done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};$jscomp.polyfill("Array.prototype.keys",function(d){return d?d:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
var _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"===typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},_createClass=function(){function d(a,c){for(var b=0;b<c.length;b++){var e=c[b];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}return function(a,c,b){c&&d(a.prototype,c);b&&d(a,b);return a}}();
function _classCallCheck(d,a){if(!(d instanceof a))throw new TypeError("Cannot call a class as a function");}function _possibleConstructorReturn(d,a){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?d:a}
function _inherits(d,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);d.prototype=Object.create(a&&a.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(d,a):d.__proto__=a)}
var Sidebar=function(d){function a(c){_classCallCheck(this,a);c=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c));c.id=random_id(c.constructor.name);return c}_inherits(a,d);_createClass(a,[{key:"render",value:function(){return React.createElement("div",{className:"sidebar"})}}]);return a}(React.Component),Header=function(d){function a(c){_classCallCheck(this,a);c=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c));c.id=random_id(c.constructor.name);
return c}_inherits(a,d);_createClass(a,[{key:"render",value:function(){return React.createElement("div",{className:"header"},React.createElement("a",{href:"/",onClick:this.props.handleClick,className:"tool-status-link"},React.createElement("span",{className:"header-title"},this.props.title)),React.createElement("ul",{className:"header-nav-list"},this.props.children))}}]);return a}(React.Component),Help=function(d){function a(c){_classCallCheck(this,a);var b=_possibleConstructorReturn(this,(a.__proto__||
Object.getPrototypeOf(a)).call(this,c));b.onLinkClick=function(a){b.setState({activefile:a.target.closest("a").attributes.href.value});a.preventDefault()};b.id=random_id(b.constructor.name);b.state={help:[],activefile:null};return b}_inherits(a,d);_createClass(a,[{key:"componentDidMount",value:function(){var a=this;fetch("/station/help").then(function(b){return b.json()}).then(function(b){return a.setState({help:b})})}},{key:"render",value:function(){var a=this,b=this.state.help.map(function(b){return React.createElement("li",
{key:b.file},React.createElement("a",{href:b.link,target:"_blank",onClick:a.onLinkClick},b.file))}),e=this.state.activefile?React.createElement("object",{data:this.state.activefile,type:"application/pdf",width:"100%",height:"100%"}):null;return React.createElement("div",null,React.createElement("div",{className:"help-page-links"},React.createElement("ul",null,b)),React.createElement("div",{className:"help-page-doc-viewer"},e))}}]);return a}(React.Component),Home=function(d){function a(c){_classCallCheck(this,
a);c=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c));c.id=random_id(c.constructor.name);c.state={station:null};return c}_inherits(a,d);_createClass(a,[{key:"componentDidMount",value:function(){var a=this;fetch("/station/status").then(function(b){return b.json()}).then(function(b){return a.setState({station:b})})}},{key:"render",value:function(){var a=this.state.station?React.createElement("div",null,React.createElement("h1",null,this.state.station.info.name)):
null;return React.createElement("div",null,a,React.createElement(SequenceController,null),React.createElement(SequenceHistory,{handleClick:this.props.extras.handleClick}))}}]);return a}(React.Component),SequenceController=function(d){function a(c){_classCallCheck(this,a);var b=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c));b.statusUpdate=function(a){a.hasOwnProperty("target")&&a.target!==b.id||(a.target===b.id&&(a.status=a.result.status,a.description=a.result.description),
b.setState({status:a.status,description:a.description}))};b.id=random_id(b.constructor.name);b.state={status:"initializing",description:"Initializing Station"};return b}_inherits(a,d);_createClass(a,[{key:"componentDidMount",value:function(){ws_register(this.id,this.statusUpdate,"InfoEvents.STATION_HEALTH");ws_register(this.id,this.statusUpdate,"InfoEvents.UI_DATA_DELIVERY");send_websocket(this.id,"InfoEvents.UI_DATA_REQUEST",{requesting:"station_health"})}},{key:"componentWillUnmount",value:function(){ws_unregister(this.id)}},
{key:"render",value:function(){return React.createElement("div",null,React.createElement("div",{className:"station-status-block ssb-"+this.state.status},React.createElement("span",{className:"station-status-text sst-"+this.state.status},this.state.status),React.createElement("span",{className:"station-status-description ssd-"+this.state.status},this.state.description),React.createElement(SequenceLauncher,{status:this.state.status})))}}]);return a}(React.Component),SequenceLauncher=function(d){function a(c){_classCallCheck(this,
a);var b=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c));b.configUpdate=function(a){b.setState({})};b.id=random_id(b.constructor.name);b.state={};return b}_inherits(a,d);_createClass(a,[{key:"render",value:function(){return React.createElement("div",{className:"station-status-buttons"},React.createElement(ActionButton,{label:"Start Sequence",buttonEvent:"ActionEvents.START_SEQUENCE",disabled:"ready"!==this.props.status}),React.createElement(ActionButton,{label:"Stop Sequence",
buttonEvent:"ActionEvents.STOP_SEQUENCE",disabled:"running"!==this.props.status}))}}]);return a}(React.Component),SequenceHistory=function(d){function a(c){_classCallCheck(this,a);var b=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c));b.statusUpdate=function(a){a.target===b.id&&b.setState({history:a.result||[]})};b.historyUpdate=function(a){send_websocket(b.id,"RetrievalEvents.GET_SEQUENCES",{number:10})};b.id=random_id(b.constructor.name);b.timer=null;b.state=
{history:[]};return b}_inherits(a,d);_createClass(a,[{key:"componentDidMount",value:function(){ws_register(this.id,this.historyUpdate,"InfoEvents.SEQUENCE_FINISHED");ws_register(this.id,this.historyUpdate,"InfoEvents.SEQUENCE_FAILED");ws_register(this.id,this.historyUpdate,"InfoEvents.SEQUENCE_ABORTED");ws_register(this.id,this.historyUpdate,"InfoEvents.STORAGE_COMPLETE");ws_register(this.id,this.statusUpdate,"InfoEvents.UI_DATA_DELIVERY");send_websocket(this.id,"RetrievalEvents.GET_SEQUENCES",{number:10})}},
{key:"componentWillUnmount",value:function(){ws_unregister(this.id)}},{key:"render",value:function(){var a=this,b=this.state.history.map(function(b){return React.createElement("tr",{key:b.uuid},React.createElement("td",null,React.createElement("a",{href:"/ui/report/"+b.uuid,onClick:a.props.handleClick},React.createElement("span",null,b.uuid.substr(0,8)))),React.createElement("td",null,(new Date(1E3*b.created)).toLocaleTimeString([],{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})),
React.createElement("td",null,b.duration/1E3+"s"),React.createElement("td",{className:"station-history-result-"+(1===b.passing?"pass":"fail")},1===b.passing?"Pass":"Fail"))});return React.createElement("div",null,React.createElement("table",{className:"station-history-table"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Sequence"),React.createElement("th",null,"Run Date"),React.createElement("th",null,"Duration"),React.createElement("th",null,"Result"))),
React.createElement("tbody",null,b)))}}]);return a}(React.Component),AlertViewer=function(d){function a(c){_classCallCheck(this,a);var b=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c));b.statusUpdate=function(a){b.setState({alerts:b.state.alerts.push(a.alert)})};b.id=random_id(b.constructor.name);b.state={alerts:[]};return b}_inherits(a,d);_createClass(a,[{key:"componentDidMount",value:function(){ws_register(this.id,this.statusUpdate,"InfoEvents.ALERT_UPDATE");
ws_register(this.id,this.statusUpdate,"InfoEvents.POPUP_UPDATE")}},{key:"componentWillUnmount",value:function(){ws_unregister(this.id)}},{key:"render",value:function(){return React.createElement("div",null,React.createElement(MessageView,{messages:this.state.alerts}))}}]);return a}(React.Component),ToolStatusNode=function(d){function a(){_classCallCheck(this,a);return _possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}_inherits(a,d);_createClass(a,[{key:"render",
value:function(){return React.createElement(React.Fragment,null,React.createElement("li",{className:"tool-status-item"+(this.props.active?" tool-status-item-active":"")},React.createElement("a",{href:"/ui/tools/"+this.props.id,onClick:this.props.handleClick,className:"tool-status-link"},React.createElement("span",{className:"tool-status-text"},React.createElement(Icon,{circle:!0,icon:this.props.status?this.props.inuse?"busy":"check":"x",fill:this.props.status?this.props.inuse?"#f39c12":"#89b148":
"#e05a4e"}),this.props.name))))}}]);return a}(React.Component),ToolStatus=function(d){function a(c){_classCallCheck(this,a);c=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c));c.id=random_id(c.constructor.name);return c}_inherits(a,d);_createClass(a,[{key:"render",value:function(){var a=this;if(0<Object.entries(this.props.allTools).length){var b=this.props.allTools.map(function(b){return React.createElement(ToolStatusNode,{key:b.tool_id,id:b.tool_id,name:b.name,
status:!0===b.online_bool,inuse:!0===b.inuse,details:b.details,route:a.props.route,handleClick:a.props.handleClick,active:b.tool_id===a.props.active})});return React.createElement("div",{className:"tool-status"},React.createElement("ul",{className:"tool-status-list"},b))}return"Loading..."}}]);return a}(React.Component),Tools=function(d){function a(c){_classCallCheck(this,a);var b=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c));b.updateObject=function(b){var a=
document.getElementById(b.target);a&&("text"===a.type||"textarea"===a.type?a.value=b.value:"number"===a.type&&(a.value=Number(b.value)))};b.id=random_id(b.constructor.name);b.state={html:"Loading...",activetool:""};b.script_tags=[];b.firstRender=!1;b.pageOptions=htmlParseOptions(function(a){return b.script_tags.push(a)},function(a){return b.onButton(a)});return b}_inherits(a,d);_createClass(a,[{key:"componentDidMount",value:function(){ws_register(this.id,this.updateObject,"InfoEvents.OBJECT_UPDATE");
this.fetchToolUrl()}},{key:"componentDidUpdate",value:function(a){0===this.props.extras.pages.length&&0<this.props.dataCache.tools.length&&!this.firstRender?this.fetchToolUrl():this.props.extras.pages[0]!==a.extras.pages[0]&&this.fetchToolUrl()}},{key:"fetchToolUrl",value:function(){var a=this;if(0<this.props.extras.pages.length){this.firstRender=!0;var b="/tool/ui/"+this.props.extras.pages[0];this.setState({activetool:this.props.extras.pages[0]});fetch(b).then(function(b){return b.text()}).then(function(b){return a.setState({html:HTMLReactParser(b,
a.pageOptions)})})}else 0<this.props.dataCache.tools.length&&(this.firstRender=!0,b="/tool/ui/"+this.props.dataCache.tools[0].tool_id,this.setState({activetool:this.props.dataCache.tools[0].tool_id}),fetch(b).then(function(b){return b.text()}).then(function(b){return a.setState({html:HTMLReactParser(b,a.pageOptions)})}))}},{key:"componentWillUnmount",value:function(){ws_unregister(this.id);this.script_tags.forEach(function(a){a=document.getElementById(a);a.parentNode.removeChild(a)})}},{key:"onButton",
value:function(a){if(a=a.target.id){var b={arguments:{command:a}};document.querySelectorAll("."+a).forEach(function(a){b.arguments[a.name]=a.value});b.type="tool_command";b.target="tool."+(this.props.extras.pages[0]||this.props.dataCache.tools[0].tool_id);send_websocket(this.id,"InfoEvents.TOOL_COMMAND",b)}}},{key:"render",value:function(){return React.createElement("div",null,React.createElement(ToolStatus,{allTools:this.props.dataCache.tools,route:this.props.extras.route,handleClick:this.props.extras.handleClick,
active:this.state.activetool}),React.createElement("div",{className:"tool-page-user-ui"},this.state.html),React.createElement(MessageView,{messages:this.props.dataCache.messages}))}}]);return a}(React.Component),Report=function(d){function a(c){_classCallCheck(this,a);var b=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c));b.buttonClick=function(a){if("report-search-by-date"===a.target.id){a=document.getElementById("report-search-by-date-start").value;var c=document.getElementById("report-search-by-date-end").value;
b.searchByDate(a,c)}else"report-search-by-value"===a.target.id&&(a=document.getElementById("report-search-by-value-input").value,b.searchByValue(a))};b.searchByDate=function(a,c){b.fetchData({starttime:a,endtime:c,number:null})};b.searchByValue=function(a){b.fetchData({sequenceuuid:a})};b.fetchData=function(a){send_websocket(b.id,"RetrievalEvents.GET_SEQUENCES",a)};b.formatTimeString=function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Date).toISOString().split("T")[0]};b.dateChange=
function(a){"end"===a.target.name?b.setState({end:a.target.value}):"start"===a.target.name&&b.setState({start:a.target.value})};b.onSeqSelect=function(a){var c=a.target.value.split(" ")[0],d={},e;for(e in b.state.sequences)if(b.state.sequences[e].uuid.startsWith(c)){d=b.state.sequences[e];break}b.setState({selectedSequence:a.target.value,activeSequence:d});send_websocket(b.id,"RetrievalEvents.GET_SEQUENCE_OPERATIONS",{sequenceuuid:c});send_websocket(b.id,"RetrievalEvents.GET_SEQUENCE_RESULTS",{sequenceuuid:c})};
b.onDataArrival=function(a){a.target===b.id&&("RetrievalEvents.GET_SEQUENCES"===a.request_event?b.setState({sequences:a.result||[]}):"RetrievalEvents.GET_SEQUENCE_OPERATIONS"===a.request_event?b.setState({operations:a.result||[]}):"RetrievalEvents.GET_SEQUENCE_RESULTS"===a.request_event&&b.setState({results:a.result||{}}))};b.id=random_id(b.constructor.name);b.state={end:b.formatTimeString(),start:b.formatTimeString(new Date((new Date).setDate((new Date).getDate()-7))),sequences:[],operations:[],
results:{},selectedSequence:null,activeSequence:{}};return b}_inherits(a,d);_createClass(a,[{key:"componentDidMount",value:function(){ws_register(this.id,this.onDataArrival,"InfoEvents.UI_DATA_DELIVERY");0<this.props.extras.pages.length?(document.getElementById("report-search-by-value-input").value=this.props.extras.pages[0],this.searchByValue(this.props.extras.pages[0])):this.buttonClick({target:{id:"report-search-by-date"}})}},{key:"componentWillUnmount",value:function(){ws_unregister(this.id)}},
{key:"render",value:function(){var a=function(a,b){return 100===a&&0===b?140:a},b=this.state.sequences?this.state.sequences.map(function(a){return React.createElement("option",{key:a.uuid},a.uuid.substr(0,8)+" "+(new Date(1E3*a.created)).toLocaleTimeString([],{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})+" "+(1===a.passing?"Pass":"Fail"))}):null,d={0:"Ready",100:"Complete",105:"Waiting on Tool",120:"Requeued",130:"Error in Execution",140:"Result Failed",150:"Skipped",
200:"Aborted"};this.state.operations?this.state.operations.map(function(b){return React.createElement("tr",{key:b.uuid},React.createElement("td",null,React.createElement("span",null,b.name)),React.createElement("td",null,b.duration/1E3+"s"),React.createElement("td",{className:"operation-history-result-"+(100===a(b.exitcode,b.passing)?"pass":"else")},d[a(b.exitcode,b.passing)]))}):React.createElement("div",null,"None");return React.createElement("div",null,React.createElement("div",{className:"report-container"},
React.createElement("div",{className:"report-select-container"},React.createElement("select",{className:"report-sequence-view",size:"20",onClick:this.onSeqSelect},b),React.createElement("div",null,React.createElement("div",null,React.createElement("input",{id:"report-search-by-value-input"}),React.createElement("br",null),React.createElement(ActionButton,{id:"report-search-by-value",label:"Search By UUID",buttonClick:this.buttonClick})),React.createElement("div",null,React.createElement("input",{type:"date",
name:"start",value:this.state.start,onChange:this.dateChange,max:this.state.end,id:"report-search-by-date-start"}),React.createElement("input",{type:"date",name:"end",value:this.state.end,onChange:this.dateChange,max:this.formatTimeString(),min:this.state.start,id:"report-search-by-date-end"}),React.createElement("br",null),React.createElement(ActionButton,{id:"report-search-by-date",label:"Search By Date Range",buttonClick:this.buttonClick})))),React.createElement(ResultTree,{title:this.state.selectedSequence,
operations:this.state.operations,results:this.state.results,sequence:this.state.activeSequence})))}}]);return a}(React.Component),ResultTree=function(d){function a(c){_classCallCheck(this,a);c=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c));c.id=random_id(c.constructor.name);return c}_inherits(a,d);_createClass(a,[{key:"render",value:function(){var a=function(a,b){return 100===a&&0===b?140:a},b={0:"Ready",100:"Complete",105:"Waiting on Tool",120:"Requeued",130:"Error in Execution",
140:"Result Failed",150:"Skipped",200:"Aborted"},d=this.props.results,g=this.props.operations?this.props.operations.map(function(c){return React.createElement(ResultOpNode,{key:c.uuid,name:c.name,duration:c.duration/1E3+"s",className:"operation-history-result-"+(100===a(c.exitcode,c.passing)?"pass":"else"),status:b[a(c.exitcode,c.passing)],results:d[c.name]})}):React.createElement("div",null,"None");if(!this.props.title)return null;var f=this.props.sequence?this.props.sequence.info.exit_reason:null;
f=f?React.createElement("tr",null,React.createElement("td",{colSpan:"3",className:"operation-history-result-"+(this.props.title.includes("Pass")?"pass":"else")},f)):null;return React.createElement("div",{className:"report-detail-container"},React.createElement("table",{className:"operation-history-table",width:"400px"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Operation"),React.createElement("th",null,"Duration"),React.createElement("th",null,"State")),
React.createElement("tr",null,React.createElement("th",{colSpan:"3",className:"operation-history-result-"+(this.props.title.includes("Pass")?"pass":"else")},this.props.title))),React.createElement("tbody",null,f,g)))}}]);return a}(React.Component),ResultOpNode=function(d){function a(c){_classCallCheck(this,a);var b=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c));b.expandClick=function(a){b.setState({expanded:!b.state.expanded})};b.id=random_id(b.constructor.name);
b.state={expanded:!1};return b}_inherits(a,d);_createClass(a,[{key:"render",value:function(){var a=this.props.results&&0<this.props.results.length&&this.state.expanded?this.props.results.map(function(a){return React.createElement(ResultDisplayNode,{key:a.uuid,resultData:a})}):null,b=this.props.results&&0<this.props.results.length?React.createElement(Icon,{icon:"caret",rotate:this.state.expanded}):null;return React.createElement(React.Fragment,null,React.createElement("tr",{onClick:this.expandClick},
React.createElement("td",{className:b?"operation-history-table-drawer-cell":""},b,React.createElement("span",null,this.props.name)),React.createElement("td",null,this.props.duration),React.createElement("td",{className:this.props.className},this.props.status)),a)}}]);return a}(React.Component),ResultDisplayNode=function(d){function a(c){_classCallCheck(this,a);c=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c));c.id=random_id(c.constructor.name);return c}_inherits(a,
d);_createClass(a,[{key:"render",value:function(){var a=this.props.resultData,b=a.description?React.createElement("span",null,a.description,React.createElement("br",null)):null;return React.createElement("tr",null,React.createElement("td",{colSpan:"2",className:"operation-history-table-result-row"},React.createElement("span",null,React.createElement("b",null,a.name)),React.createElement("br",null),b,React.createElement("span",null,"Value: ",React.createElement("b",null,a.value)),React.createElement("br",
null),React.createElement(ResultCriteria,{operator:a.operator,value:a.value,operand2:a.operand2,operand3:a.operand3})),React.createElement("td",{className:"operation-history-result-"+(a.passing?"pass":"else")},a.passing?"Pass":"Fail"))}}]);return a}(React.Component),ResultCriteria=function(d){function a(c){_classCallCheck(this,a);return _possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c))}_inherits(a,d);_createClass(a,[{key:"render",value:function(){return"inrange"===
this.props.operator?React.createElement("span",{className:"operation-history-table-result-criteria"},this.props.operand2+" <= "," ",React.createElement("b",null,this.props.value)," "," <= "+this.props.operand3):"!inrange"===this.props.operator?React.createElement("span",{className:"operation-history-table-result-criteria"},React.createElement("b",null,this.props.value)," "," < "+this.props.operand2+" OR "+this.props.operand3,React.createElement("b",null,this.props.value)):React.createElement("span",
{className:"operation-history-table-result-criteria"},React.createElement("b",null,this.props.value)," "," "+this.props.operator+" "+this.props.operand2)}}]);return a}(React.Component),Station=function(d){function a(c){_classCallCheck(this,a);var b=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c));b.updateObject=function(a){var b=document.getElementById(a.target);b&&("text"===b.type||"textarea"===b.type?b.value=a.value:"number"===b.type&&(b.value=Number(a.value)))};
b.id=random_id(b.constructor.name);b.state={html:"Loading..."};b.script_tags=[];b.pageOptions=htmlParseOptions(function(a){return b.script_tags.push(a)},function(a){return b.onButton(a)});return b}_inherits(a,d);_createClass(a,[{key:"componentDidMount",value:function(){var a=this;ws_register(this.id,this.updateObject,"InfoEvents.OBJECT_UPDATE");fetch("/station").then(function(a){return a.text()}).then(function(b){return a.setState({html:HTMLReactParser(b,a.pageOptions)})})}},{key:"componentWillUnmount",
value:function(){ws_unregister(this.id);this.script_tags.forEach(function(a){a=document.getElementById(a);a.parentNode.removeChild(a)})}},{key:"onButton",value:function(a){if(a=a.target.id){var b={arguments:{command:a}};document.querySelectorAll("."+a).forEach(function(a){b.arguments[a.name]=a.value});b.type="station_command";b.target="station";send_websocket(this.id,"InfoEvents.STATION_COMMAND",b)}}},{key:"render",value:function(){return React.createElement("div",{id:this.id+"-main"},React.createElement(ToolStatus,
{allTools:this.props.dataCache.tools,route:this.props.extras.route,handleClick:this.props.extras.handleClick}),React.createElement("div",{style:{marginTop:"5px"}},React.createElement(ActionButton,{label:"Start Sequence",buttonEvent:"ActionEvents.START_SEQUENCE"}),React.createElement(ActionButton,{label:"Stop Sequence",buttonEvent:"ActionEvents.STOP_SEQUENCE"})),React.createElement(SequenceGraph,{sequence:this.props.dataCache.sequence,width:"100%",height:"40%"}),this.state.html,React.createElement(MessageView,
{messages:this.props.dataCache.messages}))}}]);return a}(React.Component),ProgressCircle=function(d){function a(c){_classCallCheck(this,a);var b=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c));b.mouseOver=function(){b.setState({mouse:!0});b.props.hover(!0,b.props.label)};b.mouseOut=function(){b.setState({mouse:!1});b.props.hover(!1)};b.id=random_id(b.constructor.name);b.state={mouse:!1};return b}_inherits(a,d);_createClass(a,[{key:"render",value:function(){var c=
0>this.props.complete?30:this.props.complete,b=0>this.props.complete?" progress-circle-rotate":"";return React.createElement("g",{id:this.props.id,className:"graphProgressNode",transform:"translate("+this.props.x+","+this.props.y+") scale("+Math.max(Math.min(1.5,1/this.props.zoom),1)+")",onMouseEnter:this.mouseOver,onMouseLeave:this.mouseOut},React.createElement("path",{className:"progress-circle-hover"+(this.state.mouse?" is-progress-hover":""),d:a.makeArc(1.25*this.props.radius)}),React.createElement("path",
{className:"progress-circle-inner",d:a.makeArc(.9*this.props.radius)}),React.createElement("path",{className:"progress-circle-outer",d:a.makeArc(this.props.radius,.5*this.props.radius)}),React.createElement("path",{className:"progress-circle-fill"+b,d:a.makeArc(this.props.radius,.5*this.props.radius,0,c)}),React.createElement("g",{transform:"scale(1.25) translate(-8, -8)"},this.props.icon))}}],[{key:"makeArc",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,c=2<arguments.length&&
void 0!==arguments[2]?arguments[2]:0,d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:100;return d3_arc().outerRadius(a).innerRadius(b).startAngle(c).endAngle(d/100*Math.PI*2)()}}]);return a}(React.Component),GraphNode=function(d){function a(c){_classCallCheck(this,a);c=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c));c.id=random_id(c.constructor.name);c.stateToIcon={};c.stateToIcon[100]="check";c.stateToIcon[105]="busy";c.stateToIcon[120]="requeue";c.stateToIcon[130]=
"exclaim";c.stateToIcon[140]="x";c.stateToIcon[150]="none";c.stateToIcon[200]="abort";c.stateToIconFill={};c.stateToIconFill[100]="#89b148";c.stateToIconFill[105]="#f39c12";c.stateToIconFill[120]="#6495ed";c.stateToIconFill[130]="#e05a4e";c.stateToIconFill[140]="#cf5000";c.stateToIconFill[150]="#777777";c.stateToIconFill[200]="#8b0000";return c}_inherits(a,d);_createClass(a,[{key:"render",value:function(){var a=this.props.code,b=a,d=null;100===this.props.code&&!1===this.props.passing&&(a=140);0<b&&
100>b?b=-1:100<=b&&(b=100,d=React.createElement(Icon,{circle:!0,border:!0,icon:this.stateToIcon[a],fill:this.stateToIconFill[a]}));return React.createElement("g",{id:this.props.id},React.createElement(ProgressCircle,{radius:this.props.radius,zoom:this.props.zoom,x:this.props.x,y:this.props.y,complete:b,icon:d,hover:this.props.hover,duration_ms:this.props.duration_ms,avgduration:this.props.avgduration,label:this.props.id,status:a}))}}]);return a}(React.Component),SequenceGraph=function(d){function a(c){_classCallCheck(this,
a);var b=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c));b.mouseHovering=function(a,c){b.setState({isHovering:a,hoverOperation:c})};b.resizeHelper=function(){if(!b.state.isHovering){var a=b.resizeGraph();a&&a.zoom!==b.state.zoom&&b.setState({zoom:a.zoom,translate:a.translate})}};b.resizeGraph=function(){if(document.getElementById("sequence-graph")){var a=document.getElementById("sequence-graph-group"),b=document.getElementById("sequence-graph").getBoundingClientRect(),
c=document.getElementById("sequence-graph-group").getBBox(),d=Math.min(b.width/(c.width+20),b.height/(c.height+20));a.setAttribute("transform","scale("+d+")");c=document.getElementById("sequence-graph-group").getBBox();var k=document.getElementById("sequence-graph-group").getBoundingClientRect(),l=Math.floor((b.width-k.width)/2)/d;b=Math.floor((b.height-k.height)/2)/d;l-=c.x;b-=c.y;a.setAttribute("transform","scale("+d+") translate("+l+", "+b+")");return{zoom:d,translate:[l,b]}}};b.drawGraph=function(){var a=
new dagre.graphlib.Graph({compound:!0});a.setGraph({rankdir:"LR",nodesep:10,ranksep:b.state.rankSep,marginx:10,marginy:10});a.setDefaultEdgeLabel(function(){return{}});a.setNode("top-group",{label:"--graph-group"});a.setNode("bottom-group",{label:"--graph-group"});b.props.sequence.operations.forEach(function(b){a.setNode(b.opid,{id:b.uuid,label:b.opid,code:b.exitcode,avgduration:b.avgduration,duration_ms:b.duration_ms,passing:b.passing,padding:12,paddingTop:3,paddingBottom:8})});b.props.sequence.operations.forEach(function(b){b.dependencies.forEach(function(c){a.setEdge(c,
b.opid)})});b.props.sequence.loops.forEach(function(b){var c=random_id("loop-group",length=5);a.setNode(c,{label:"--graph-group",class:"graph-loop-group"});b.members.forEach(function(b){a.setParent(b,c)})});b.props.sequence.entrynodes.forEach(function(b){a.setParent(b,"top-group")});b.props.sequence.exitnodes.forEach(function(b){a.setParent(b,"bottom-group")});dagre.layout(a);var c=[];a.nodes().forEach(function(b){var d=a.node(b);"--graph-group"!==d.label&&c.push({label:d.label,x:d.x,y:d.y,id:b,code:d.code,
avgduration:d.avgduration,duration_ms:d.duration_ms,passing:d.passing})});var d=[];a.edges().forEach(function(b){var c=[],e=a.node(b.v),g=a.node(b.w);c.push([e.x,e.y]);a.edge(b).points.forEach(function(a){return c.push([a.x,a.y])});c.push([g.x,g.y]);d.push({points:c,id:b.v+">"+b.w})});var h=[];b.props.sequence.loops.forEach(function(b){var c=b.members.map(function(b){return a.node(b)});b=c.reduce(function(a,b){return[Math.min(a[0],b.x),Math.min(a[1],b.y)]},[c[0].x,c[0].y]);c=c.reduce(function(a,b){return[Math.max(a[0],
b.x),Math.max(a[1],b.y)]},[c[0].x,c[0].y]);h.push({min:b,max:c,id:random_id("loop-cluster",length=5)})});b.setState({nodes:c,edges:d,clusters:h});b.graph_drawn=!0};b.hoverNodeMaker=function(){var a={0:"Ready",100:"Complete",105:"Waiting on Tool",120:"Requeued",130:"Error in Execution",140:"Result Failed",150:"Skipped",200:"Aborted"};if(null===b.state.hoverOperation||void 0===b.state.hoverOperation)return null;var c=-1,d;for(d in b.state.nodes)if(b.state.nodes[d].label===b.state.hoverOperation){c=
d;break}if(-1===c)return null;c=b.state.nodes[c];a=0<c.code&&100>c.code?"Running":a[c.code];return React.createElement("div",{className:"sequence-graph-hover-message"},React.createElement("b",null,c.label)," ",React.createElement("br",null),parseFloat(c.duration_ms/1E3).toFixed(2)+"s / "+parseFloat(c.avgduration).toFixed(2)+"s (avg)"," ",React.createElement("br",null),a)};b.graph_drawn=!1;b.id=random_id(b.constructor.name);b.state={rankSep:250,zoom:1,translate:[0,0],clusters:[],nodes:[],edges:[],
isHovering:!1,hoverOperation:null};return b}_inherits(a,d);_createClass(a,[{key:"componentDidMount",value:function(){ws_register(this.id,this.drawGraph,"InfoEvents.SEQUENCE_LOADED");0<Object.entries(this.props.sequence).length&&!0!==this.graph_drawn&&this.drawGraph();window.addEventListener("resize",this.resizeHelper)}},{key:"componentDidUpdate",value:function(a){this.props.sequence.operations!==a.sequence.operations&&this.drawGraph();0<Object.entries(this.props.sequence).length&&!0!==this.graph_drawn&&
this.drawGraph();this.resizeHelper()}},{key:"componentWillUnmount",value:function(){ws_unregister(this.id);window.removeEventListener("resize",this.resizeHelper)}},{key:"render",value:function(){var a=this;if(0<Object.entries(this.props.sequence).length){var b=function(){var b=a.state.clusters.map(function(a){return React.createElement("g",{key:a.id,className:"cluster"},React.createElement("rect",{x:a.min[0]-20,y:a.min[1]-20,rx:"5",width:a.max[0]-a.min[0]+40,height:a.max[1]-a.min[1]+40}))}),c=a.state.nodes.map(function(b){return React.createElement(GraphNode,
{id:b.label,key:b.id,x:b.x,y:b.y,avgduration:b.avgduration,duration_ms:b.duration_ms,radius:"9.5",zoom:a.state.zoom,code:b.code,hover:a.mouseHovering,passing:b.passing})}),d=d3_line().curve(d3_curveBasis),h=a.state.edges.map(function(a){return React.createElement("g",{key:a.id,className:"edgePath"},React.createElement("path",{className:"sequence-graph-edges",d:d(a.points),stroke:"black",fill:"none"}))}),k=a.hoverNodeMaker();return{v:React.createElement("div",null,React.createElement("div",{className:"sequence-graph-hover-box"},
k),React.createElement("svg",{id:"sequence-graph"},React.createElement("g",{id:"sequence-graph-group"},React.createElement("g",{className:"clusters"},b),React.createElement("g",{className:"edgePaths"},h),React.createElement("g",{className:"nodes"},c))))}}();if("object"===("undefined"===typeof b?"undefined":_typeof(b)))return b.v}else return"Start sequence to view graph..."}}]);return a}(React.Component),Content=function(d){function a(c){_classCallCheck(this,a);var b=_possibleConstructorReturn(this,
(a.__proto__||Object.getPrototypeOf(a)).call(this,c));b.updateSequence=function(a){"undefined"!=typeof a&&(a.hasOwnProperty("target")&&a.target!==b.id||(a.target===b.id?b.setState({sequence:a.result.data}):b.setState({sequence:JSON.parse(a.data)})))};b.updateSequenceDraw=function(a){"undefined"!=typeof a&&b.setState({sequence_redraw:!0})};b.updateTool=function(a){"undefined"!=typeof a&&b.setState({tools:a.status})};b.updateMessage=function(a){if("undefined"!=typeof a){var c=b.state.messages;c.unshift(a.source+
": "+a.message);1E3<c.length&&c.pop();b.setState({messages:c})}};b.updateLog=function(a){if("undefined"!=typeof a){var c=b.state.log;c.unshift(a);500<c.length&&c.pop();b.setState({log:c})}};b.id=random_id(b.constructor.name);b.state={sequence:{},sequence_redraw:!1,tools:{},log:[],messages:[]};return b}_inherits(a,d);_createClass(a,[{key:"componentDidMount",value:function(){ws_register(this.id,this.updateSequence,"InfoEvents.SEQUENCE_UPDATE");ws_register(this.id,this.updateSequenceDraw,"InfoEvents.SEQUENCE_LOADED");
ws_register(this.id,this.updateTool,"InfoEvents.TOOL_UPDATE");ws_register(this.id,this.updateMessage,"InfoEvents.MESSAGE_UPDATE");ws_register(this.id,this.updateMessage,"InfoEvents.ALERT_UPDATE");ws_register(this.id,this.updateLog,"InfoEvents.LOG");ws_register(this.id,this.updateSequence,"InfoEvents.UI_DATA_DELIVERY");send_websocket(this.id,"InfoEvents.UI_DATA_REQUEST",{requesting:"sequence_status"})}},{key:"componentWillUnmount",value:function(){ws_unregister(this.id)}},{key:"render",value:function(){return React.createElement("div",
{id:"main"},React.cloneElement(this.props.route.object,{extras:this.props.route.extras,dataCache:this.state}))}}]);return a}(React.Component),NavLinkItem=function(d){function a(){_classCallCheck(this,a);return _possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}_inherits(a,d);_createClass(a,[{key:"render",value:function(){return React.createElement("li",{className:this.props.active?"active-nav-link":null},React.createElement("a",{href:this.props.href,onClick:this.props.onClick,
className:"header-nav-link"},React.createElement("span",{className:"header-nav-text"},React.createElement(Icon,{fill:"currentColor",icon:this.props.icon||""}),React.createElement("span",{className:"header-nav-text-name"},this.props.title))))}}]);return a}(React.Component),App=function(d){function a(c){_classCallCheck(this,a);var b=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c));b.onWebsocketOpen=function(){b.firstConnectionPassed&&window.location.reload(!0);b.setState({wsConnection:!0});
b.firstConnectionPassed=!0;send_websocket(b.id,"InfoEvents.UI_LOADED",{})};b.onWebsocketClose=function(){b.setState({wsConnection:!1});setTimeout(open_websocket,3E3,b.onWebsocketOpen,b.onWebsocketClose)};b.onLinkClick=function(a){var c=a.target.closest("a").attributes.href.value||"/";window.history.pushState({},"",c);b.setState({route:c});a.preventDefault()};b.pages={"/":{object:React.createElement(Home,null),title:"Home",icon:"home",args:{}},"/ui/station":{object:React.createElement(Station,null),
title:"Station",icon:"station",args:{}},"/ui/tools":{object:React.createElement(Tools,null),title:"Tools",icon:"tools",args:{}},"/ui/report":{object:React.createElement(Report,null),title:"Report",icon:"report",args:{}},"/ui/help":{object:React.createElement(Help,null),title:"Help",icon:"question",args:{}}};b.getObject=function(a){var c={handleClick:b.onLinkClick,pages:[]},d;for(d in b.pages)if(a.startsWith(d)&&"/"!==d&&a!==d){a=a.split(d)[1];a.startsWith("/")&&(a=a.substring(1));c.pages=a.split("/");
a=d;break}c.route=a;c.args=b.pages[a].args;return{object:b.pages[a].object,extras:c}};b.id=random_id(b.constructor.name);b.state={route:location.pathname,wsConnection:!0};b.firstConnectionPassed=!1;window.addEventListener("popstate",function(a){b.setState({route:location.pathname})});return b}_inherits(a,d);_createClass(a,[{key:"componentDidMount",value:function(){open_websocket(this.onWebsocketOpen,this.onWebsocketClose)}},{key:"componentWillUnmount",value:function(){ws_unregister(this.id);close_websocket()}},
{key:"render",value:function(){var a=this,b=function(b){return"/"===a.state.route&&"/"===b||a.state.route.startsWith(b)&&"/"!==b},d=Object.keys(this.pages).map(function(c){return React.createElement(NavLinkItem,{key:a.pages[c].title,active:b(c),onClick:a.onLinkClick,href:c,icon:a.pages[c].icon,title:a.pages[c].title})});return React.createElement("div",null,React.createElement(Sidebar,null),React.createElement(Header,{title:"StationExec",handleClick:this.onLinkClick},d),React.createElement(Content,
{route:this.getObject(this.state.route)}),React.createElement(Clock,null),React.createElement(ActionButton,{label:"Shutdown",buttonEvent:"ActionEvents.SHUTDOWN",className:"station-shutdown-button"}),React.createElement(Modal,{show:!this.state.wsConnection},React.createElement(ModalPopup,null,"Lost Connection to Server. Reconnecting...")))}}]);return a}(React.Component),domContainer=document.getElementById("main-content");ReactDOM.render(React.createElement(App,{name:"StationExec"}),domContainer);
